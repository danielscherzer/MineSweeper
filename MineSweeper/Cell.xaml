<UserControl x:Class="MineSweeper.Cell"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" d:DesignHeight="800" d:DesignWidth="800">
	<Grid Name="cell">
		<Grid.Resources>
			<!-- A brush for flat 3D panel borders -->
			<LinearGradientBrush x:Key="Flat3DBorderBrush">
				<GradientStop Color="#FFF" Offset="0" />
				<GradientStop Color="#DDD" Offset="0.499" />
				<GradientStop Color="#AAA" Offset="0.501" />
				<GradientStop Color="#888" Offset="1" />
			</LinearGradientBrush>
		</Grid.Resources>
		<Border BorderThickness="1" BorderBrush="DarkGray" Background="#FFD5D2D2">
			<Grid Name="grid">
				<Canvas Name="mine" Width="700" Height="700">
					<Path Fill="Black" Height="414.715" Canvas.Left="144.857" Canvas.Top="143.286" Width="412.622" Data="M544,62.289326 L614.71069,133 C592.12293,155.58776 569.53518,178.17552 546.94742,200.76328 561.80952,222.66667 573.42857,238.66667 584.99506,291 617.66337,291 650.33169,291 683,291 L683,391 C650.33169,391 617.66337,391 584.99506,391 575.90476,430.33333 565.22693,453.60104 548.92227,478.35156 548.67033,478.71962 557.70536,465.01786 548.16644,479.45575 571.68119,502.9705 595.19594,526.48525 618.71069,550 L548,620.71069 C524.51169,597.05854 501.02337,573.40639 477.53506,549.75424 456.22321,564.77679 420.42145,579.77429 390.38373,585.9209 L390,585.99442 390,685 290,685 290,585.99442 289.61629,585.9209 C259.57858,579.77429 227.03571,568.36905 200.08333,548.13095 L130,617.71069 59.289318,547 129.85992,476.42938 C105.74071,439.25534 103.75508,432.6967 95.004941,391 L0,391 0,291 C31.670505,291 63.34101,291 95.011515,291 107.5,236.64286 113.92349,230.24669 129.69705,205.76752 L129.72704,205.72271 60.718319,136.714 131.429,66.003323 199.87334,134.20489 C232.92857,110.16667 246.83333,102.7381 289.45695,96.448373 289.45695,64.377282 289,32.071091 289,0 L389,0 389,95.813994 C432.83333,106.2619 451.57143,113.82143 475.38095,130.91667" Stretch="Fill"/>
				</Canvas>
				<Viewbox Name="viewBox"  d:IsHidden="True">
					<TextBlock x:Name="textBlockMines" TextAlignment="Center" HorizontalAlignment="Center">
						<TextBlock.Style>
							<Style TargetType="TextBlock">
								<Setter Property="Foreground" Value="Black"/>
								<Style.Triggers>
									<Trigger Property="Text" Value="1">
										<Setter Property="Foreground" Value="Blue"/>
									</Trigger>
									<Trigger Property="Text" Value="2">
										<Setter Property="Foreground" Value="Green"/>
									</Trigger>
									<Trigger Property="Text" Value="3">
										<Setter Property="Foreground" Value="Red"/>
									</Trigger>
									<Trigger Property="Text" Value="4">
										<Setter Property="Foreground" Value="DarkBlue"/>
									</Trigger>
									<Trigger Property="Text" Value="5">
										<Setter Property="Foreground" Value="DarkRed"/>
									</Trigger>
									<Trigger Property="Text" Value="6">
										<Setter Property="Foreground" Value="Cyan"/>
									</Trigger>
								</Style.Triggers>
							</Style>
						</TextBlock.Style>
					</TextBlock>
				</Viewbox>
			</Grid>
		</Border>
		<Border Name="closed" BorderThickness="3" BorderBrush="{StaticResource Flat3DBorderBrush}" Background="Silver" MouseLeftButtonDown="OpenCell" MouseRightButtonDown="MarkCell" d:IsHidden="True">
			<!--<Border.RenderTransform>
				<TranslateTransform x:Name="translate"/>
			</Border.RenderTransform>-->
			<Border.Triggers>
				<EventTrigger RoutedEvent="MouseLeftButtonDown">
					<BeginStoryboard>
						<Storyboard Name="animationOpen">
							<!--<DoubleAnimation To="100" Duration="0:0:1" Storyboard.TargetName="translate" Storyboard.TargetProperty="X"/>-->
							<DoubleAnimation To="0" Duration="0:0:0.5" Storyboard.TargetName="closed" Storyboard.TargetProperty="Opacity"/>
							<BooleanAnimationUsingKeyFrames Duration="0:0:1" Storyboard.TargetName="closed" Storyboard.TargetProperty="IsEnabled">
								<DiscreteBooleanKeyFrame Value="True" KeyTime="0:0:0" />
								<DiscreteBooleanKeyFrame Value="False" KeyTime="0:0:1" />
							</BooleanAnimationUsingKeyFrames>
						</Storyboard>
					</BeginStoryboard>
				</EventTrigger>
			</Border.Triggers>
			<Viewbox Name="mark" Opacity="0">
				<TextBlock TextAlignment="Center" HorizontalAlignment="Center" Text="X"/>
			</Viewbox>
		</Border>
	</Grid>
</UserControl>
